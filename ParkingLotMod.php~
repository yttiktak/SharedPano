<!DOCTYPE html>
<?
  require('Pusher.php');

  $options = array(
    'encrypted' => true
  );
  $pusher = new Pusher(
    '95b5a3122e42176dd240',
    '74ad1005e87f3cb6d1bc',
    '202775',
    $options
  );

  $data['message'] = 'hello world';
  $pusher->trigger('test_channel', 'my_event', $data);
?>

<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
		<meta name="mobile-web-app-capable" content="yes" />		
		<style type="text/css" title="Default">
			body, div, h1, h2, h3, span, p {
				font-family: Verdana,Arial,Helvetica,sans-serif;
			}
			/* fullscreen */
			html {
				height:100%;
			}
			body {
				height:100%;
				margin: 0px;
				overflow:hidden; /* disable scrollbars */
				font-size: 10pt;
			}
			/* fix for scroll bars on webkit & >=Mac OS X Lion */ 
			::-webkit-scrollbar {
				background-color: rgba(0,0,0,0.5);
				width: 0.75em;
			}
			::-webkit-scrollbar-thumb {
    			background-color:  rgba(255,255,255,0.5);
			}
		</style>
		<script src="https://js.pusher.com/3.0/pusher.min.js"></script>
		<script>
    // Enable pusher logging - don't include this in production
    Pusher.log = function(message) {
      if (window.console && window.console.log) {
        window.console.log(message);
      }
    };

    var pusher = new Pusher('95b5a3122e42176dd240', {
      encrypted: true
    });

    var channel = pusher.subscribe('test_channel');
    channel.bind('my_event', function(data) {
      alert(data.message);
    });
		</script>

	
	</head>
	<body>
<!-- - - - - - - 8<- - - - - - cut here - - - - - 8<- - - - - - - -->
		<script type="text/javascript" src="pano2vr_player.js">
		</script>
		<script type="text/javascript" src="skin.js">
		</script>
		<div id="container" style="width:100%;height:100%;">
		<br>Loading...<br><br>
		This content requires HTML5 with CSS3 3D Transforms or WebGL.
		</div>
		<script type="text/javascript">

function surrogateCtor() {}
function extend(base,sub) {
	surrogateCtor.prototype = base.prototype;
	sub.prototype = new surrogateCtor();
	sub.prototype.constructor = sub;
}
 

			function MyPlayer( container ) {
				pano2vrPlayer.apply(this,arguments);
				// these read things do not seem to see action. Except the first one.
				this.readConfigUrlAsync = function( url ) {
					console.log(url);
					pano2vrPlayer.prototype.readConfigUrlAsync.call(this,url);
				}
				this.readConfigUrl = function( url ) {
					console.log(url);
					pano2vrPlayer.prototype.readConfigUrl.call(this,url);
				}
				this.readConfigXml = function( url ) {
					console.log(url);
					pano2vrPlayer.prototype.readConfigXml.call(this,url);
				}
				// openUrl is called from hotspots, both xml and html versions
				this.openUrl = function( url ) {
					console.log(url);
					pano2vrPlayer.prototype.openUrl.call(this,url);
				}
			}
			extend(pano2vrPlayer,MyPlayer); 

			// create the panorama player with the container
			pano=new MyPlayer("container");
		// add the skin object
		skin=new pano2vrSkin(pano);
		// load the configuration
		window.addEventListener("load", function() {
			pano.readConfigUrlAsync("ParkingLot1.xml");
console.log(pano);
		});
		</script>
		<noscript>
			<p><b>Please enable Javascript!</b></p>
		</noscript>
<!-- - - - - - - 8<- - - - - - cut here - - - - - 8<- - - - - - - --> 
		<!-- Hack needed to hide the url bar on iOS 9, iPhone 5s --> 
		<div style="width:1px;height:1px;"></div>
	</body>
</html>
